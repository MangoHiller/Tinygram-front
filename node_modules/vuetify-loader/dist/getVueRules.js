"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getVueRules = exports.isVueLoader = void 0;
let vueLoaderPath;
try {
    vueLoaderPath = require.resolve('vue-loader');
}
catch (err) { }
function isVueLoader(use) {
    return typeof use === 'object' && (use.ident === 'vue-loader-options' ||
        use.loader === 'vue-loader' ||
        (vueLoaderPath && use.loader === vueLoaderPath));
}
exports.isVueLoader = isVueLoader;
function getVueRules(compiler) {
    const rules = compiler.options.module.rules;
    // Naive approach without RuleSet or RuleSetCompiler
    return rules.map((rule, index) => ((typeof rule === 'object' &&
        Array.isArray(rule?.use) &&
        rule.use.find(isVueLoader))
        ? { rule: { ...rule }, index }
        : null)).filter(v => v != null);
}
exports.getVueRules = getVueRules;
//# sourceMappingURL=getVueRules.js.map