"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const loader_shared_1 = require("@vuetify/loader-shared");
exports.default = (function VuetifyLoader(content, sourceMap) {
    this.async();
    this.cacheable();
    const render = /^import { render } from "(.+)"$/m.exec(content)?.[1];
    const script = /^import script from "(.+)"$/m.exec(content)?.[1];
    const module = render || script;
    if (module && !this.resourceQuery) {
        new Promise((resolve, reject) => {
            this.loadModule(module, (err, source) => {
                if (err)
                    return reject(err);
                const module = /export \* from "(.+)"/.exec(source)?.[1];
                module && this.loadModule(module, (err, source) => {
                    if (err)
                        reject(err);
                    else
                        resolve(source);
                });
            });
        }).then(source => {
            content += (0, loader_shared_1.generateImports)(source, this.resourcePath, 'script').code;
            this.callback(null, content, sourceMap);
        });
    }
    else {
        this.callback(null, content, sourceMap);
    }
});
//# sourceMappingURL=scriptLoader.js.map