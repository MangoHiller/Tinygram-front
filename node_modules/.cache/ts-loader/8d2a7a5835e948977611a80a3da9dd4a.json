{"remainingRequest":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/thread-loader/dist/cjs.js!/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/babel-loader/lib/index.js!/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/ts-loader/index.js??clonedRuleSet-42.use[3]!/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ruleSet[1].rules[38].use[0]!/home/hugo_leguillier/tinygram-2022-2023/front/src/store/index.ts","dependencies":[{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/src/store/index.ts","mtime":1669334560816},{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/babel.config.js","mtime":1668093862815},{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js","mtime":1668093903975},{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/thread-loader/dist/cjs.js","mtime":1668093903990},{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/babel-loader/lib/index.js","mtime":1668093897906},{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/ts-loader/index.js","mtime":1668093913655},{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1668093912746}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2h1Z29fbGVndWlsbGllci90aW55Z3JhbS0yMDIyLTIwMjMvZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCB7IGNyZWF0ZVN0b3JlIH0gZnJvbSAndnVleCc7CmltcG9ydCByb3V0ZXIgZnJvbSAnQC9yb3V0ZXIvaW5kZXgnOwppbXBvcnQgYXhpb3MgZnJvbSAnQC9wbHVnaW5zL2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgY3JlYXRlU3RvcmUoewogIHN0YXRlOiB7CiAgICBjcmVkZW50aWFsczogbnVsbCwKICAgIHVzZXI6IG51bGwKICB9LAogIG11dGF0aW9uczogewogICAgc2V0Q3JlZGVudGlhbHM6IGZ1bmN0aW9uIHNldENyZWRlbnRpYWxzKHN0YXRlLCBjcmVkZW50aWFscykgewogICAgICBzdGF0ZS5jcmVkZW50aWFscyA9IGNyZWRlbnRpYWxzOwogICAgfSwKICAgIHJlbW92ZUNyZWRlbnRpYWxzOiBmdW5jdGlvbiByZW1vdmVDcmVkZW50aWFscyhzdGF0ZSkgewogICAgICBzdGF0ZS5jcmVkZW50aWFscyA9IG51bGw7CiAgICB9LAogICAgc2V0VXNlcjogZnVuY3Rpb24gc2V0VXNlcihzdGF0ZSwgdXNlcikgewogICAgICBzdGF0ZS51c2VyID0gdXNlcjsKICAgIH0sCiAgICByZW1vdmVVc2VyOiBmdW5jdGlvbiByZW1vdmVVc2VyKHN0YXRlKSB7CiAgICAgIHN0YXRlLnVzZXIgPSBudWxsOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYsIGNyZWRlbnRpYWxzKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGNvbW1pdCwgc3RhdGUsIGRpc3BhdGNoLCB1c2VyOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYuY29tbWl0LCBzdGF0ZSA9IF9yZWYuc3RhdGUsIGRpc3BhdGNoID0gX3JlZi5kaXNwYXRjaDsKCiAgICAgICAgICAgICAgICBpZiAoIShjcmVkZW50aWFscyAhPT0gbnVsbCAmJiBjcmVkZW50aWFscyAhPT0gdm9pZCAwICYmIGNyZWRlbnRpYWxzLmNyZWRlbnRpYWwpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBnbG9iYWwgYXhpb3MgQXV0aG9yaXphdGlvbiBoZWFkZXIgdG8gb3VyIGJlYXJlciBKV1QgdG9rZW4KICAgICAgICAgICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uID0gewogICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KGNyZWRlbnRpYWxzLmNyZWRlbnRpYWwpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDM7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5nZXQoJy91c2Vycy9tZScpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICB1c2VyID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIC8vIENvbW1pdCB0aGUgY3JlZGVudGlhbHMgYW5kIHVzZXIgZGF0YSB0byB0aGUgc3RvcmUKICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0Q3JlZGVudGlhbHMnLCBjcmVkZW50aWFscyk7IC8vIFNhdmUgdGhlIHRva2VuIHRvIGtlZXAgdGhlIHNlc3Npb24gZ29pbmcgdGhyb3VnaCByZWZyZXNoZXMKCiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCBKU09OLnN0cmluZ2lmeShjcmVkZW50aWFscy5jcmVkZW50aWFsKSk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ3JldHJpZXZlVXNlcicpOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgcm91dGVyLnB1c2goJy9ob21lJyk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxNDsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMyk7CiAgICAgICAgICAgICAgICBkaXNwYXRjaCgnbG9nb3V0Jyk7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzMsIDE0XV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICByZXRyaWV2ZVVzZXI6IGZ1bmN0aW9uIHJldHJpZXZlVXNlcihfcmVmMikgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgY29tbWl0LCBzdGF0ZSwgZGlzcGF0Y2gsIHVzZXI7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYyLmNvbW1pdCwgc3RhdGUgPSBfcmVmMi5zdGF0ZSwgZGlzcGF0Y2ggPSBfcmVmMi5kaXNwYXRjaDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5nZXQoJy91c2Vycy9tZScpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICB1c2VyID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldFVzZXInLCB1c2VyLmRhdGEpOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDg7CiAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMSk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKF9jb250ZXh0Mi50MCk7CiAgICAgICAgICAgICAgICBkaXNwYXRjaCgnbG9nb3V0Jyk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbMSwgOF1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoX3JlZjMpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIGNvbW1pdCwgc3RhdGU7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYzLmNvbW1pdCwgc3RhdGUgPSBfcmVmMy5zdGF0ZTsKICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgdG9rZW4gZnJvbSB0aGUgYXhpb3MgaGVhZGVyCiAgICAgICAgICAgICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbiA9IHsKICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogJycKICAgICAgICAgICAgICAgIH07IC8vIFJlbW92ZSB0aGUgdG9rZW4gZnJvbSB0aGUgc3RvcmUKCiAgICAgICAgICAgICAgICBjb21taXQoJ3JlbW92ZUNyZWRlbnRpYWxzJyk7CiAgICAgICAgICAgICAgICBjb21taXQoJ3JlbW92ZVVzZXInKTsgLy8gUmVtb3ZlIHRoZSB0b2tlbiBmcm9tIGxvY2FsIHN0b3JhZ2UKCiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTsgLy8gUmVkaXJlY3QgdG8gdGhlIGxvZ2luIHBhZ2UKCiAgICAgICAgICAgICAgICByb3V0ZXIucHVzaCgnLycpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkoKTsKICAgIH0KICB9LAogIGdldHRlcnM6IHsKICAgIGlzTG9nZ2VkSW46IGZ1bmN0aW9uIGlzTG9nZ2VkSW4oc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnVzZXIgIT09IG51bGw7CiAgICB9LAogICAgZ2V0VXNlcjogZnVuY3Rpb24gZ2V0VXNlcihzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUudXNlcjsKICAgIH0KICB9LAogIG1vZHVsZXM6IHt9Cn0pOw=="},{"version":3,"sources":["/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ruleSet[1].rules[38].use[0]!/home/hugo_leguillier/tinygram-2022-2023/front/src/store/index.ts"],"names":[],"mappings":"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","sourcesContent":["import { createStore } from 'vuex';\nimport router from '@/router/index';\nimport axios from '@/plugins/axios';\n\nexport default createStore({\n  state: {\n    credentials: null,\n    user: null,\n  },\n  mutations: {\n    setCredentials(state, credentials) {\n      state.credentials = credentials;\n    },\n    removeCredentials(state) {\n      state.credentials = null;\n    },\n    setUser(state, user) {\n      state.user = user;\n    },\n    removeUser(state) {\n      state.user = null;\n    },\n  },\n  actions: {\n    async login({ commit, state, dispatch }, credentials) {\n      // Firstly check if we have access to the Google JWT Token\n      if (credentials?.credential) {\n        // Set the global axios Authorization header to our bearer JWT token\n        axios.defaults.headers.common = {\n          Authorization: `Bearer ${credentials.credential}`,\n        };\n\n        try {\n          // Then retrieve user data from our API\n          const user = await axios.get('/users/me');\n\n          // Commit the credentials and user data to the store\n          commit('setCredentials', credentials);\n\n          // Save the token to keep the session going through refreshes\n          localStorage.setItem('token', JSON.stringify(credentials.credential));\n\n          await dispatch('retrieveUser');\n          router.push('/home');\n        } catch (error) {\n          dispatch('logout');\n        }\n      }\n    },\n\n    async retrieveUser({ commit, state, dispatch }) {\n      try {\n        // Then retrieve user data from our API\n        const user = await axios.get('/users/me');\n        commit('setUser', user.data);\n      } catch (error) {\n        console.error(error);\n        dispatch('logout');\n      }\n    },\n\n    async logout({ commit, state }) {\n      // Remove the token from the axios header\n      axios.defaults.headers.common = {\n        Authorization: '',\n      };\n\n      // Remove the token from the store\n      commit('removeCredentials');\n      commit('removeUser');\n\n      // Remove the token from local storage\n      localStorage.removeItem('token');\n\n      // Redirect to the login page\n      router.push('/');\n    },\n  },\n  getters: {\n    isLoggedIn(state) {\n      return state.user !== null;\n    },\n    getUser(state) {\n      return (state as any).user;\n    },\n  },\n  modules: {},\n});\n"],"sourceRoot":""}]}