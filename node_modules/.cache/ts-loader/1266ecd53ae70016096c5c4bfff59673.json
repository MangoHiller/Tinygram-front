{"remainingRequest":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/thread-loader/dist/cjs.js!/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/babel-loader/lib/index.js!/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/ts-loader/index.js??clonedRuleSet-42.use[3]!/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!/home/hugo_leguillier/tinygram-2022-2023/front/src/views/Profile.vue?vue&type=script&lang=ts","dependencies":[{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/src/views/Profile.vue","mtime":1669334560455},{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/babel.config.js","mtime":1668093862815},{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js","mtime":1668093903975},{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/thread-loader/dist/cjs.js","mtime":1668093903990},{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/babel-loader/lib/index.js","mtime":1668093897906},{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/ts-loader/index.js","mtime":1668093913655},{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/cache-loader/dist/cjs.js","mtime":1668093903975},{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/vue-loader/dist/index.js","mtime":1668093920179}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvaHVnb19sZWd1aWxsaWVyL3RpbnlncmFtLTIwMjItMjAyMy9mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvaG9tZS9odWdvX2xlZ3VpbGxpZXIvdGlueWdyYW0tMjAyMi0yMDIzL2Zyb250L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgeyBkZWZpbmVDb21wb25lbnQgfSBmcm9tICd2dWUnOwppbXBvcnQgeyBtYXBBY3Rpb25zLCBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmltcG9ydCBQcm9maWxlUG9zdCBmcm9tICdAL2NvbXBvbmVudHMvUG9zdHMvUHJvZmlsZVBvc3QudnVlJzsKaW1wb3J0IGF4aW9zIGZyb20gJ0AvcGx1Z2lucy9heGlvcyc7CmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7CiAgbmFtZTogJ1Byb2ZpbGUnLAogIGNvbXBvbmVudHM6IHsKICAgIFByb2ZpbGVQb3N0OiBQcm9maWxlUG9zdAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXI6IHt9LAogICAgICBwb3N0czogW10KICAgIH07CiAgfSwKICB3YXRjaDogewogICAgJHJvdXRlOiBmdW5jdGlvbiAkcm91dGUoKSB7CiAgICAgIHZhciBfdGhpcyQkcm91dGUsIF90aGlzJCRyb3V0ZSRwYXJhbXM7CgogICAgICBpZiAoKF90aGlzJCRyb3V0ZSA9IHRoaXMuJHJvdXRlKSAhPT0gbnVsbCAmJiBfdGhpcyQkcm91dGUgIT09IHZvaWQgMCAmJiAoX3RoaXMkJHJvdXRlJHBhcmFtcyA9IF90aGlzJCRyb3V0ZS5wYXJhbXMpICE9PSBudWxsICYmIF90aGlzJCRyb3V0ZSRwYXJhbXMgIT09IHZvaWQgMCAmJiBfdGhpcyQkcm91dGUkcGFyYW1zLnByb2ZpbGVfaGFuZGxlcikgewogICAgICAgIC8vVXBkYXRlIHByb2ZpbGUgb24gcm91dGUgY2hhbmdlCiAgICAgICAgdGhpcy5sb2FkUHJvZmlsZSgpOwogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX3RoaXMubG9hZFByb2ZpbGUoKTsKCiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBBY3Rpb25zKFsnbG9naW4nLCAnbG9nb3V0J10pKSwgbWFwR2V0dGVycyhbJ2lzTG9nZ2VkSW4nLCAnZ2V0VXNlciddKSksIHt9LCB7CiAgICBsb2FkUHJvZmlsZTogZnVuY3Rpb24gbG9hZFByb2ZpbGUoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuZ2V0VXNlcklkKF90aGlzMi4kcm91dGUucGFyYW1zLnByb2ZpbGVfaGFuZGxlcik7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF90aGlzMi51c2VyID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLmdldFVzZXJQb3N0cyhfdGhpczIudXNlcik7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIF90aGlzMi5wb3N0cyA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBnZXRVc2VySWQ6IGZ1bmN0aW9uIGdldFVzZXJJZChoYW5kbGUpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIGRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5nZXQoIi91c2Vycy9oYW5kbGUvIi5jb25jYXQoaGFuZGxlKSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIGRhdGEgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBkYXRhLmRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBnZXRVc2VyUG9zdHM6IGZ1bmN0aW9uIGdldFVzZXJQb3N0cyh1c2VyKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgIHZhciBkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KCIvcG9zdHM/YXV0aG9ySWQ9Ii5jb25jYXQodXNlci5pZCkpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBkYXRhID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgZGF0YS5kYXRhLml0ZW1zKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZm9sbG93VXNlcjogZnVuY3Rpb24gZm9sbG93VXNlcigpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICB2YXIgcmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgiL2ZvbGxvdy8iLmNvbmNhdChfdGhpczMudXNlci5pZCkpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDUuc2VudDsKICAgICAgICAgICAgICAgIF90aGlzMy51c2VyLmhhc0ZvbGxvd2VkID0gcmVzLmRhdGEuaGFzRm9sbG93ZWQ7CiAgICAgICAgICAgICAgICBfdGhpczMudXNlci5mb2xsb3dlcnMgPSByZXMuZGF0YS5mb2xsb3dlcnM7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgdHJ1ZSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0pCn0pOw=="},{"version":3,"sources":["/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!/home/hugo_leguillier/tinygram-2022-2023/front/src/views/Profile.vue?vue&type=script&lang=ts"],"names":[],"mappings":";;;AACA,SAAS,eAAT,QAAgC,KAAhC;AACA,SAAS,UAAT,EAAqB,UAArB,QAAuC,MAAvC;AACA,OAAO,WAAP,MAAwB,oCAAxB;AACA,OAAO,KAAP,MAAkB,iBAAlB;AAEA,eAAe,eAAe,CAAC;AAC7B,EAAA,IAAI,EAAE,SADuB;AAG7B,EAAA,UAAU,EAAE;AACV,IAAA,WAAW,EAAX;AADU,GAHiB;AAO7B,EAAA,IAP6B,kBAOzB;AACF,WAAO;AACL,MAAA,IAAI,EAAE,EADD;AAEL,MAAA,KAAK,EAAE;AAFF,KAAP;AAID,GAZ4B;AAc7B,EAAA,KAAK,EAAE;AACL,IAAA,MADK,oBACC;AAAA;;AACJ,0BAAI,KAAK,MAAT,gEAAI,aAAa,MAAjB,gDAAI,oBAAqB,eAAzB,EAA0C;AACxC;AACA,aAAK,WAAL;AACD;AACF;AANI,GAdsB;AAuBvB,EAAA,OAvBuB,qBAuBhB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACX,cAAA,KAAI,CAAC,WAAL;;AADW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEZ,GAzB4B;AA2B7B,EAAA,OAAO,gDACF,UAAU,CAAC,CAAC,OAAD,EAAU,QAAV,CAAD,CADR,GAEF,UAAU,CAAC,CAAC,YAAD,EAAe,SAAf,CAAD,CAFR;AAIC,IAAA,WAJD,yBAIY;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACG,MAAI,CAAC,SAAL,CAAe,MAAI,CAAC,MAAL,CAAY,MAAZ,CAAmB,eAAlC,CADH;;AAAA;AACf,gBAAA,MAAI,CAAC,IADU;AAAA;AAAA,uBAEI,MAAI,CAAC,YAAL,CAAkB,MAAI,CAAC,IAAvB,CAFJ;;AAAA;AAEf,gBAAA,MAAI,CAAC,KAFU;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGhB,KAPI;AASC,IAAA,SATD,qBASW,MATX,EASyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACT,KAAK,CAAC,GAAN,yBAA2B,MAA3B,EADS;;AAAA;AACtB,gBAAA,IADsB;AAAA,kDAErB,IAAI,CAAC,IAFgB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAG7B,KAZI;AAcC,IAAA,YAdD,wBAcc,IAdd,EAcuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACP,KAAK,CAAC,GAAN,2BAA6B,IAAI,CAAC,EAAlC,EADO;;AAAA;AACpB,gBAAA,IADoB;AAAA,kDAEnB,IAAI,CAAC,IAAL,CAAU,KAFS;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAG3B,KAjBI;AAmBC,IAAA,UAnBD,wBAmBW;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACI,KAAK,CAAC,IAAN,mBAAuB,MAAY,CAAC,IAAb,CAAkB,EAAzC,EADJ;;AAAA;AACR,gBAAA,GADQ;AAGb,gBAAA,MAAY,CAAC,IAAb,CAAkB,WAAlB,GAAgC,GAAG,CAAC,IAAJ,CAAS,WAAzC;AACA,gBAAA,MAAY,CAAC,IAAb,CAAkB,SAAlB,GAA8B,GAAG,CAAC,IAAJ,CAAS,SAAvC;AAJa,kDAKP,IALO;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMf;AAzBI;AA3BsB,CAAD,CAA9B","sourcesContent":["\nimport { defineComponent } from 'vue';\nimport { mapActions, mapGetters } from 'vuex';\nimport ProfilePost from '@/components/Posts/ProfilePost.vue';\nimport axios from '@/plugins/axios';\n\nexport default defineComponent({\n  name: 'Profile',\n\n  components: {\n    ProfilePost,\n  },\n\n  data() {\n    return {\n      user: {},\n      posts: [] as any,\n    };\n  },\n\n  watch: {\n    $route() {\n      if (this.$route?.params?.profile_handler) {\n        //Update profile on route change\n        this.loadProfile();\n      }\n    },\n  },\n\n  async mounted() {\n    this.loadProfile();\n  },\n\n  methods: {\n    ...mapActions(['login', 'logout']),\n    ...mapGetters(['isLoggedIn', 'getUser']),\n\n    async loadProfile() {\n      this.user = await this.getUserId(this.$route.params.profile_handler as string);\n      this.posts = await this.getUserPosts(this.user);\n    },\n\n    async getUserId(handle: string) {\n      const data = await axios.get(`/users/handle/${handle}`);\n      return data.data;\n    },\n\n    async getUserPosts(user: any) {\n      const data = await axios.get(`/posts?authorId=${user.id}`);\n      return data.data.items;\n    },\n\n    async followUser() {\n      const res = await axios.post(`/follow/${(this as any).user.id}`);\n\n      (this as any).user.hasFollowed = res.data.hasFollowed;\n      (this as any).user.followers = res.data.followers;\n      return true;\n    },\n  },\n});\n"],"sourceRoot":""}]}