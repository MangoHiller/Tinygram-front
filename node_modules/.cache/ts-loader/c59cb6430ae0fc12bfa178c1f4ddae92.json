{"remainingRequest":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/thread-loader/dist/cjs.js!/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/babel-loader/lib/index.js!/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/ts-loader/index.js??clonedRuleSet-42.use[3]!/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!/home/hugo_leguillier/tinygram-2022-2023/front/src/views/Profile.vue?vue&type=script&lang=ts","dependencies":[{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/src/views/Profile.vue","mtime":1668093862828},{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/babel-loader/lib/index.js","mtime":1668093897906},{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/ts-loader/index.js","mtime":1668093913655},{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/cache-loader/dist/cjs.js","mtime":1668093903975},{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/vue-loader/dist/index.js","mtime":1668093920179},{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/babel.config.js","mtime":1668093862815},{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js","mtime":1668093903975},{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/thread-loader/dist/cjs.js","mtime":1668093903990},{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/babel-loader/lib/index.js","mtime":1668093897906},{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/ts-loader/index.js","mtime":1668093913655},{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/cache-loader/dist/cjs.js","mtime":1668093903975},{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/vue-loader/dist/index.js","mtime":1668093920179}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50IH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgbWFwQWN0aW9ucywgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgUHJvZmlsZVBvc3QgZnJvbSAnQC9jb21wb25lbnRzL1Bvc3RzL1Byb2ZpbGVQb3N0LnZ1ZSc7CmltcG9ydCBheGlvcyBmcm9tICdAL3BsdWdpbnMvYXhpb3MnOwpleHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoewogIG5hbWU6ICdQcm9maWxlJywKICBjb21wb25lbnRzOiB7CiAgICBQcm9maWxlUG9zdAogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyOiB7fSwKICAgICAgcG9zdHM6IFtdCiAgICB9OwogIH0sCgogIHdhdGNoOiB7CiAgICAkcm91dGUoKSB7CiAgICAgIHZhciBfdGhpcyQkcm91dGUsIF90aGlzJCRyb3V0ZSRwYXJhbXM7CgogICAgICBpZiAoKF90aGlzJCRyb3V0ZSA9IHRoaXMuJHJvdXRlKSAhPT0gbnVsbCAmJiBfdGhpcyQkcm91dGUgIT09IHZvaWQgMCAmJiAoX3RoaXMkJHJvdXRlJHBhcmFtcyA9IF90aGlzJCRyb3V0ZS5wYXJhbXMpICE9PSBudWxsICYmIF90aGlzJCRyb3V0ZSRwYXJhbXMgIT09IHZvaWQgMCAmJiBfdGhpcyQkcm91dGUkcGFyYW1zLnByb2ZpbGVfaGFuZGxlcikgewogICAgICAgIC8vVXBkYXRlIHByb2ZpbGUgb24gcm91dGUgY2hhbmdlCiAgICAgICAgdGhpcy5sb2FkUHJvZmlsZSgpOwogICAgICB9CiAgICB9CgogIH0sCgogIGFzeW5jIG1vdW50ZWQoKSB7CiAgICB0aGlzLmxvYWRQcm9maWxlKCk7CiAgfSwKCiAgbWV0aG9kczogeyAuLi5tYXBBY3Rpb25zKFsnbG9naW4nLCAnbG9nb3V0J10pLAogICAgLi4ubWFwR2V0dGVycyhbJ2lzTG9nZ2VkSW4nLCAnZ2V0VXNlciddKSwKCiAgICBhc3luYyBsb2FkUHJvZmlsZSgpIHsKICAgICAgdGhpcy51c2VyID0gYXdhaXQgdGhpcy5nZXRVc2VySWQodGhpcy4kcm91dGUucGFyYW1zLnByb2ZpbGVfaGFuZGxlcik7CiAgICAgIHRoaXMucG9zdHMgPSBhd2FpdCB0aGlzLmdldFVzZXJQb3N0cyh0aGlzLnVzZXIpOwogICAgfSwKCiAgICBhc3luYyBnZXRVc2VySWQoaGFuZGxlKSB7CiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBheGlvcy5nZXQoYC91c2Vycy9oYW5kbGUvJHtoYW5kbGV9YCk7CiAgICAgIHJldHVybiBkYXRhLmRhdGE7CiAgICB9LAoKICAgIGFzeW5jIGdldFVzZXJQb3N0cyh1c2VyKSB7CiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBheGlvcy5nZXQoYC9wb3N0cz9hdXRob3JJZD0ke3VzZXIuaWR9YCk7CiAgICAgIHJldHVybiBkYXRhLmRhdGEuaXRlbXM7CiAgICB9LAoKICAgIGFzeW5jIGZvbGxvd1VzZXIoKSB7CiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGF4aW9zLnBvc3QoYC9mb2xsb3cvJHt0aGlzLnVzZXIuaWR9YCk7CiAgICAgIHRoaXMudXNlci5oYXNGb2xsb3dlZCA9IHJlcy5kYXRhLmhhc0ZvbGxvd2VkOwogICAgICB0aGlzLnVzZXIuZm9sbG93ZXJzID0gcmVzLmRhdGEuZm9sbG93ZXJzOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgfQp9KTs="},{"version":3,"sources":["/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!/home/hugo_leguillier/tinygram-2022-2023/front/src/views/Profile.vue?vue&type=script&lang=ts"],"names":[],"mappings":"AACA,SAAS,eAAT,QAAgC,KAAhC;AACA,SAAS,UAAT,EAAqB,UAArB,QAAuC,MAAvC;AACA,OAAO,WAAP,MAAwB,oCAAxB;AACA,OAAO,KAAP,MAAkB,iBAAlB;AAEA,eAAe,eAAe,CAAC;AAC7B,EAAA,IAAI,EAAE,SADuB;AAG7B,EAAA,UAAU,EAAE;AACV,IAAA;AADU,GAHiB;;AAO7B,EAAA,IAAI,GAAA;AACF,WAAO;AACL,MAAA,IAAI,EAAE,EADD;AAEL,MAAA,KAAK,EAAE;AAFF,KAAP;AAID,GAZ4B;;AAc7B,EAAA,KAAK,EAAE;AACL,IAAA,MAAM,GAAA;AAAA;;AACJ,0BAAI,KAAK,MAAT,gEAAI,aAAa,MAAjB,gDAAI,oBAAqB,eAAzB,EAA0C;AACxC;AACA,aAAK,WAAL;AACD;AACF;;AANI,GAdsB;;AAuB7B,QAAM,OAAN,GAAa;AACX,SAAK,WAAL;AACD,GAzB4B;;AA2B7B,EAAA,OAAO,EAAE,EACP,GAAG,UAAU,CAAC,CAAC,OAAD,EAAU,QAAV,CAAD,CADN;AAEP,OAAG,UAAU,CAAC,CAAC,YAAD,EAAe,SAAf,CAAD,CAFN;;AAIP,UAAM,WAAN,GAAiB;AACf,WAAK,IAAL,GAAY,MAAM,KAAK,SAAL,CAAe,KAAK,MAAL,CAAY,MAAZ,CAAmB,eAAlC,CAAlB;AACA,WAAK,KAAL,GAAa,MAAM,KAAK,YAAL,CAAkB,KAAK,IAAvB,CAAnB;AACD,KAPM;;AASP,UAAM,SAAN,CAAgB,MAAhB,EAA8B;AAC5B,YAAM,IAAI,GAAG,MAAM,KAAK,CAAC,GAAN,CAAU,iBAAiB,MAAM,EAAjC,CAAnB;AACA,aAAO,IAAI,CAAC,IAAZ;AACD,KAZM;;AAcP,UAAM,YAAN,CAAmB,IAAnB,EAA4B;AAC1B,YAAM,IAAI,GAAG,MAAM,KAAK,CAAC,GAAN,CAAU,mBAAmB,IAAI,CAAC,EAAE,EAApC,CAAnB;AACA,aAAO,IAAI,CAAC,IAAL,CAAU,KAAjB;AACD,KAjBM;;AAmBP,UAAM,UAAN,GAAgB;AACd,YAAM,GAAG,GAAG,MAAM,KAAK,CAAC,IAAN,CAAW,WAAY,KAAa,IAAb,CAAkB,EAAE,EAA3C,CAAlB;AAEC,WAAa,IAAb,CAAkB,WAAlB,GAAgC,GAAG,CAAC,IAAJ,CAAS,WAAzC;AACA,WAAa,IAAb,CAAkB,SAAlB,GAA8B,GAAG,CAAC,IAAJ,CAAS,SAAvC;AACD,aAAO,IAAP;AACD;;AAzBM;AA3BoB,CAAD,CAA9B","sourcesContent":["\nimport { defineComponent } from 'vue';\nimport { mapActions, mapGetters } from 'vuex';\nimport ProfilePost from '@/components/Posts/ProfilePost.vue';\nimport axios from '@/plugins/axios';\n\nexport default defineComponent({\n  name: 'Profile',\n\n  components: {\n    ProfilePost,\n  },\n\n  data() {\n    return {\n      user: {},\n      posts: [] as any,\n    };\n  },\n\n  watch: {\n    $route() {\n      if (this.$route?.params?.profile_handler) {\n        //Update profile on route change\n        this.loadProfile();\n      }\n    },\n  },\n\n  async mounted() {\n    this.loadProfile();\n  },\n\n  methods: {\n    ...mapActions(['login', 'logout']),\n    ...mapGetters(['isLoggedIn', 'getUser']),\n\n    async loadProfile() {\n      this.user = await this.getUserId(this.$route.params.profile_handler as string);\n      this.posts = await this.getUserPosts(this.user);\n    },\n\n    async getUserId(handle: string) {\n      const data = await axios.get(`/users/handle/${handle}`);\n      return data.data;\n    },\n\n    async getUserPosts(user: any) {\n      const data = await axios.get(`/posts?authorId=${user.id}`);\n      return data.data.items;\n    },\n\n    async followUser() {\n      const res = await axios.post(`/follow/${(this as any).user.id}`);\n\n      (this as any).user.hasFollowed = res.data.hasFollowed;\n      (this as any).user.followers = res.data.followers;\n      return true;\n    },\n  },\n});\n"],"sourceRoot":""}]}