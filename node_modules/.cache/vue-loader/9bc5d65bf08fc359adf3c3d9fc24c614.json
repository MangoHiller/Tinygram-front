{"remainingRequest":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!/home/hugo_leguillier/tinygram-2022-2023/front/src/views/Profile.vue?vue&type=script&lang=ts","dependencies":[{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/src/views/Profile.vue","mtime":1669334560455},{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js","mtime":1668093903975},{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/thread-loader/dist/cjs.js","mtime":1668093903990},{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/babel-loader/lib/index.js","mtime":1668093897906},{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/ts-loader/index.js","mtime":1668093913655},{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/cache-loader/dist/cjs.js","mtime":1668093903975},{"path":"/home/hugo_leguillier/tinygram-2022-2023/front/node_modules/vue-loader/dist/index.js","mtime":1668093920179}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IGRlZmluZUNvbXBvbmVudCB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IG1hcEFjdGlvbnMsIG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IFByb2ZpbGVQb3N0IGZyb20gJ0AvY29tcG9uZW50cy9Qb3N0cy9Qcm9maWxlUG9zdC52dWUnOwppbXBvcnQgYXhpb3MgZnJvbSAnQC9wbHVnaW5zL2F4aW9zJzsKCmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7CiAgbmFtZTogJ1Byb2ZpbGUnLAoKICBjb21wb25lbnRzOiB7CiAgICBQcm9maWxlUG9zdCwKICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcjoge30sCiAgICAgIHBvc3RzOiBbXSBhcyBhbnksCiAgICB9OwogIH0sCgogIHdhdGNoOiB7CiAgICAkcm91dGUoKSB7CiAgICAgIGlmICh0aGlzLiRyb3V0ZT8ucGFyYW1zPy5wcm9maWxlX2hhbmRsZXIpIHsKICAgICAgICAvL1VwZGF0ZSBwcm9maWxlIG9uIHJvdXRlIGNoYW5nZQogICAgICAgIHRoaXMubG9hZFByb2ZpbGUoKTsKICAgICAgfQogICAgfSwKICB9LAoKICBhc3luYyBtb3VudGVkKCkgewogICAgdGhpcy5sb2FkUHJvZmlsZSgpOwogIH0sCgogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoWydsb2dpbicsICdsb2dvdXQnXSksCiAgICAuLi5tYXBHZXR0ZXJzKFsnaXNMb2dnZWRJbicsICdnZXRVc2VyJ10pLAoKICAgIGFzeW5jIGxvYWRQcm9maWxlKCkgewogICAgICB0aGlzLnVzZXIgPSBhd2FpdCB0aGlzLmdldFVzZXJJZCh0aGlzLiRyb3V0ZS5wYXJhbXMucHJvZmlsZV9oYW5kbGVyIGFzIHN0cmluZyk7CiAgICAgIHRoaXMucG9zdHMgPSBhd2FpdCB0aGlzLmdldFVzZXJQb3N0cyh0aGlzLnVzZXIpOwogICAgfSwKCiAgICBhc3luYyBnZXRVc2VySWQoaGFuZGxlOiBzdHJpbmcpIHsKICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGF4aW9zLmdldChgL3VzZXJzL2hhbmRsZS8ke2hhbmRsZX1gKTsKICAgICAgcmV0dXJuIGRhdGEuZGF0YTsKICAgIH0sCgogICAgYXN5bmMgZ2V0VXNlclBvc3RzKHVzZXI6IGFueSkgewogICAgICBjb25zdCBkYXRhID0gYXdhaXQgYXhpb3MuZ2V0KGAvcG9zdHM/YXV0aG9ySWQ9JHt1c2VyLmlkfWApOwogICAgICByZXR1cm4gZGF0YS5kYXRhLml0ZW1zOwogICAgfSwKCiAgICBhc3luYyBmb2xsb3dVc2VyKCkgewogICAgICBjb25zdCByZXMgPSBhd2FpdCBheGlvcy5wb3N0KGAvZm9sbG93LyR7KHRoaXMgYXMgYW55KS51c2VyLmlkfWApOwoKICAgICAgKHRoaXMgYXMgYW55KS51c2VyLmhhc0ZvbGxvd2VkID0gcmVzLmRhdGEuaGFzRm9sbG93ZWQ7CiAgICAgICh0aGlzIGFzIGFueSkudXNlci5mb2xsb3dlcnMgPSByZXMuZGF0YS5mb2xsb3dlcnM7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICB9LAp9KTsK"},{"version":3,"sources":["/home/hugo_leguillier/tinygram-2022-2023/front/src/views/Profile.vue"],"names":[],"mappings":"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AAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;IAExC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAC9E,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACjD,CAAC;;IAED,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MAC9B,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACvD,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC;;IAED,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE;MAC5B,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAC1D,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACxB,CAAC;;IAED,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MACjB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;MAEhE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACrD,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACjD,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACb,CAAC;EACH,CAAC;AACH,CAAC,CAAC","file":"/home/hugo_leguillier/tinygram-2022-2023/front/src/views/Profile.vue","sourceRoot":"","sourcesContent":["<template>\n  <v-container justify=\"center\" align=\"center\" style=\"margin-top: 12px\">\n    <div\n      v-if=\"user\"\n      class=\"mt-5\"\n      style=\"display: flex; flex-direction: row; align-items: start; justify-content: center\"\n    >\n      <div style=\"display: flex; flex-direction: row; align-items: start\">\n        <img\n          max-height=\"96px\"\n          max-width=\"96px\"\n          :src=\"user.pictureURL\"\n          style=\"border-radius: 50%; height: 96px; width: 96px; border: solid 0.01em black\"\n        />\n      </div>\n      <div class=\"ml-4\" style=\"display: flex; flex-direction: column; align-items: start\">\n        <div style=\"display: flex; flex-direction: column; align-items: start; text-align: start\">\n          <h1 style=\"margin-bottom: -8px\">{{ user.name }}</h1>\n          <span class=\"text-grey-darken-1\">@{{ user.handle }}</span>\n        </div>\n        <div\n          class=\"account-stats mt-2\"\n          style=\"display: flex; flex-direction: row; align-items: center; justify-content: start\"\n        >\n          <div v-if=\"isLoggedIn() && getUser().handle != user.handle\" class=\"account-buttons mr-4\">\n            <v-btn size=\"small\" @click=\"followUser\" :color=\"user.hasFollowed ? 'blue' : 'lightgrey'\">\n              {{ user.hasFollowed ? 'Followed' : 'Follow' }}\n            </v-btn>\n          </div>\n          <v-icon class=\"mr-2\" small>mdi-account-group</v-icon> {{ user.followers }} Follower{{\n            user.followers == 1 ? '' : 's'\n          }}\n        </div>\n      </div>\n    </div>\n\n    <br />\n    <v-divider />\n    <br />\n    <div class=\"account-posts\">\n      <ProfilePost v-for=\"post in posts\" :key=\"post.id\" :data=\"post\" />\n    </div>\n  </v-container>\n</template>\n\n<style scoped>\n* {\n  color: white;\n}\n\nh1 {\n  width: 240px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.account-stats span {\n  margin-left: 12px;\n  display: inline-block;\n}\n\n.account-buttons .v-btn::before {\n  box-shadow: none;\n  border: none;\n}\n\n.account-buttons .v-btn {\n  color: black;\n}\n\n.account-buttons .v-btn .v-icon {\n  color: black;\n}\n\n.account-posts {\n  display: grid;\n  grid-template-columns: repeat(1, 1fr);\n  grid-gap: 20px;\n  padding: 20px;\n}\n\n.account-posts .v-card {\n  object-fit: cover;\n  width: 100%;\n}\n\n@media (min-width: 600px) {\n  .account-posts {\n    grid-template-columns: repeat(2, 1fr);\n  }\n\n  h1 {\n    width: 400px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n}\n\n@media (min-width: 900px) {\n  .account-posts {\n    grid-template-columns: repeat(3, 1fr);\n  }\n}\n\n@media (min-width: 1600px) {\n  .account-posts {\n    grid-template-columns: repeat(5, 1fr);\n  }\n}\n</style>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport { mapActions, mapGetters } from 'vuex';\nimport ProfilePost from '@/components/Posts/ProfilePost.vue';\nimport axios from '@/plugins/axios';\n\nexport default defineComponent({\n  name: 'Profile',\n\n  components: {\n    ProfilePost,\n  },\n\n  data() {\n    return {\n      user: {},\n      posts: [] as any,\n    };\n  },\n\n  watch: {\n    $route() {\n      if (this.$route?.params?.profile_handler) {\n        //Update profile on route change\n        this.loadProfile();\n      }\n    },\n  },\n\n  async mounted() {\n    this.loadProfile();\n  },\n\n  methods: {\n    ...mapActions(['login', 'logout']),\n    ...mapGetters(['isLoggedIn', 'getUser']),\n\n    async loadProfile() {\n      this.user = await this.getUserId(this.$route.params.profile_handler as string);\n      this.posts = await this.getUserPosts(this.user);\n    },\n\n    async getUserId(handle: string) {\n      const data = await axios.get(`/users/handle/${handle}`);\n      return data.data;\n    },\n\n    async getUserPosts(user: any) {\n      const data = await axios.get(`/posts?authorId=${user.id}`);\n      return data.data.items;\n    },\n\n    async followUser() {\n      const res = await axios.post(`/follow/${(this as any).user.id}`);\n\n      (this as any).user.hasFollowed = res.data.hasFollowed;\n      (this as any).user.followers = res.data.followers;\n      return true;\n    },\n  },\n});\n</script>\n"]}]}